<odoo>
  <data>

    <record model="ir.ui.view" id="sale_order_line_inherit">
      <field name="name">sale order line inherit</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_order_form"/>
      <field name="arch" type="xml">
        
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='price_unit']" position="before">
            <field name="quantity_available" width="0.1%%"/>
            <field name="quantity_on_hand" width="0.1%%"/>
            <field name="quantity_forecasted" width="0.1%%"/>
        </xpath>
        
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='product_uom_qty']" position="replace">
            <field name="product_uom_qty" width="0.8%" context="{
                                                   'partner_id': parent.partner_id, 
                                                   'quantity': product_uom_qty, 
                                                   'pricelist': parent.pricelist_id, 
                                                   'uom': product_uom, 
                                                   'company_id': parent.company_id
                                                   }"/>
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='product_uom']" position="replace">
            <field name="product_uom" width="0.8%" force_save="1" groups="uom.group_uom" class="oe_no_button" attrs="{
                                                  'readonly': [('state', 'in', ('sale', 'done', 'cancel'))],
                                                  'required': [('display_type', '=', False)],
                                                  }"/>
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='tax_id']" position="replace">
            <field name="tax_id" width="0.8%%"
                   widget="many2many_tags" 
                   options="{'no_create': True}" 
                   context="{'search_view_ref': 'account.account_tax_view_search'}" 
                   domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]" attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/>
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='product_id']" position="replace">
               <field name="product_id"
                    domain="[('sale_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]"
                    context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                    attrs="{
                        'readonly': [('product_updatable', '=', False)],
                        'required': [('display_type', '=', False)],
                    }"
                    force_save="1"
                    widget="many2one_barcode"
                    width="1%%"
                   />
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='tax_id']" position="replace">
            <field
                name="tax_id"
                widget="many2many_tags"
                options="{'no_create': True}"
                domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"
                optional="show"
                width="0.7%%"
            />
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='name']" position="replace">
          <field name="name" width="1%%"/>
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree" position="attributes">
            <!--<attribute name="decoration-danger">product_uom_qty >= quantity_available</attribute>-->
            <attribute name="decoration-danger">quantity_available &lt;=0 and quantity_on_hand &lt;=0</attribute>
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree" position="attributes">
            <attribute name="decoration-warning">product_uom_qty &gt; quantity_on_hand</attribute>
        </xpath>
        <xpath expr="//notebook/page[@name='order_lines']/field[@name='order_line']/tree" position="attributes">
            <attribute name="decoration-success">quantity_on_hand &gt;= product_uom_qty</attribute>
        </xpath>
      </field>
    </record>

    <!--<record id="view_sale_order_confirm_inherit_form" model="ir.ui.view">
            <field name="name">sale.order.confirm.inherit.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="dev_customer_credit_limit.view_sale_order_confirm_inherit_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[7]" position="before">
                    <field name="is_possible_confirm" invisible="1"/>
                </xpath>
                <xpath expr="//button[@name='action_sale_ok']" position="attributes">
                    <attribute name="attrs">{'invisible': [('is_possible_confirm', '=', False)]}</attribute>
                </xpath>
                <xpath expr="//button[@name='action_sale_ok']" position="replace">
                     <button name="action_sale_ok"
                             states="sent"
                             string="Confirm Sales"
                             class="btn-primary"
                             type="object"
                             attrs="{'invisible': [('is_possible_confirm', '=', False)]}"
                             context="{'show_sale': True}"/>
                </xpath>
                <xpath expr="//button[@name='action_confirm']" position="replace">
                     <button name="action_confirm"
                             states="credit_limit"
                             string="Confirm Sale"
                             class="btn-primary"
                             type="object"
                             context="{'show_sale': True}"
                             groups="sales_team.group_sale_manager"/>
                </xpath>
            </field>
        </record>-->


  </data>
</odoo>
